# popnbt
A C NBT Tag parser. Exports NBT Tags as tokens, with arrays/strings having their start and end offset in the NBT data. On the lines of [popini](https://github.com/popgoesme700/popini) and [jsmn](https://github.com/zserge/jsmn).
## Using the library in your own projects.
Everytime you include `popnbt.h` which is the only file needed for using popnbt, you compile the library... due to this, its best practice to toss `popnbt.h` into a C file specifically for it, like `popnbt.c`. Afterwards, every inclusion of `popnbt.h` should has the line `#define POPLIBS_POPNBTCOMPILED` before the inclusion. If you want to compile popnbt for every C file that includes it, add this line `#define POPLIBS_POPNBT_STATIC` before including `popnbt.h`, this will compile all symbols of `popnbt.h` as static, meaning only the file including `popnbt.h` will have access to the symbols of `popnbt.h` that are "compiled"
## Some useful knowledge.
Due to popnbt using the same token approach as [popini](https://github.com/popgoesme700/popini) and [jsmn](https://github.com/zserge/jsmn), tokens are your main form of way to obtain the data of NBT tags in a somewhat readable fashion. Tokens all contain the following keys, `type`, `name`, and `value`. The `type` key stores the token's NBT type, the `name` key stores the token's NBT name coordinates, only applies to tokens belonging to a compound NBT token (including the compound NBT token itself), and the `value` key stores the value of the token, if any. it could be any of `lnum`, `dnum`, or `coords`. `lnum` stores the number in base 10 format, aka no fractions, only whole numbers. `dnum` stores the number as a double, meaning it could contain a fraction (and even NaN). `coords` stores the same kind of data a token's `name` key would store, which is a `start` and an `end` key. Those two keys store positions in the original NBT data that this token pertains to. Keep in mind all these keys inside of the token's `value` key are a union, so any of these can pointer to eachother's data, so its best to use the right `value` key for the token. byte, short, int, long, list, and compound tokens use the `lnum` key of the `value` key, for everything except list and compound tokens, it stores the normal value, for a list or compound token, itll store the amount of tokens afterwards are apart of it (excluding the tokens belonging to child list or compound tokens). float, and double NBT token's use the `dnum` key of the `value` key, which just stores its normal value. bytearray, string, intarray, and longarray use the `coords` key of the `value` key, which stores the `start` of the array or string's index into the the NBT data, and the `end` of the array or string's index into the NBT data, best to use a form of `substr` function, which will grab all data between these two key's numbers in the NBT data (including the position indicated by the keys).
### Todo!
Add documentation about the changes to the library, which are rather huge.
### Examples!
Currently i have not created an example program of this library. Look at the test unit at `test/src/main.c` or wait until i update this. The usage is very similar to how you would use [popini](https://github.com/popgoesme700/popini).